{% extends "shared/layout.html" %}
{% block title %}Upravit kategorii{% endblock %}

{% block content %}
<h1 class="h3 mb-3">Upravit kategorii</h1>

<form action="{{ url_for('admin.edit_category', category_id=category.id) }}" method="post" class="needs-validation" novalidate>
  <div class="mb-3">
    <label class="form-label">Název</label>
    <input type="text" name="name" class="form-control" value="{{ category.name }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Kategorie (dříve Skupina)</label>
    <input type="text" name="category" class="form-control" value="{{ category.group or '' }}">
    <input type="hidden" name="group" value="{{ category.group or '' }}">
    <script>
      document.addEventListener('input', (e) => {
        if (e.target && e.target.name === 'category') {
          const g = document.querySelector('input[name="group"]');
          if (g) g.value = e.target.value;
        }
      });
    </script>
  </div>

  <div class="mb-4">
    <label class="form-label">Popis</label>
    <textarea name="description" class="form-control" rows="3">{{ category.description or "" }}</textarea>
  </div>

  <div class="d-flex gap-2">
    <a href="{{ url_for('admin.list_categories') }}" class="btn btn-outline-secondary">Zpět</a>
    <button type="submit" class="btn btn-primary">Uložit změny</button>
  </div>
</form>
{% endblock %}
